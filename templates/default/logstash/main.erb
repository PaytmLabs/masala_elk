<% if node['masala_elk']['logstash'].has_key?('input') -%>
input {
<% node['masala_elk']['logstash']['input'].each do |name, entry| -%>
<%= render "logstash/input/" + entry['plugin'] + ".erb", :variables => entry.has_key?('vars') ? entry['vars'].to_hash : nil, :local => false -%>
<% end -%>
}
<% end -%>

<% if node['masala_elk']['logstash'].has_key?('output') -%>
output {
<% node['masala_elk']['logstash']['output'].each do |name, entry| -%>
<% if entry.has_key?('only_type') -%>
  if [type] == "<%= entry['only_type'] %>" {
<% end -%>
<%= render "logstash/output/" + entry['plugin'] + ".erb", :variables => entry.has_key?('vars') ? entry['vars'].to_hash : nil, :local => false -%>
<% if entry.has_key?('only_type') -%>
  }
<% end -%>
<% end -%>
}
<% end -%>

